!function(a,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("tns-core-modules/color"),require("tns-core-modules/ui/page/page"),require("tns-core-modules/platform"),require("@angular/core")):"function"==typeof define&&define.amd?define("nativescript-ngx-shadow",["exports","tns-core-modules/color","tns-core-modules/ui/page/page","tns-core-modules/platform","@angular/core"],t):t(a["nativescript-ngx-shadow"]={},null,null,null,a.ng.core)}(this,function(a,s,E,r,t){"use strict";var w,R,c={RECTANGLE:"RECTANGLE",OVAL:"OVAL",RING:"RING",LINE:"LINE"};r.isAndroid&&(w=android.graphics.drawable.LayerDrawable.extend({}),R=android.graphics.drawable.GradientDrawable.extend({}));var e=function(){function u(){}return u.apply=function(a,t){a.android&&21<=android.os.Build.VERSION.SDK_INT?u.applyOnAndroid(a,u.getDefaults(t)):a.ios&&u.applyOnIOS(a,u.getDefaults(t))},u.getDefaults=function(a){return Object.assign({},a,{shape:a.shape||u.DEFAULT_SHAPE,pressedElevation:a.pressedElevation||u.DEFAULT_PRESSED_ELEVATION,pressedTranslationZ:a.pressedTranslationZ||u.DEFAULT_PRESSED_ELEVATION,shadowColor:a.shadowColor||u.DEFAULT_SHADOW_COLOR,useShadowPath:a.useShadowPath===undefined||a.useShadowPath,rasterize:a.rasterize!==undefined&&a.rasterize})},u.isShadow=function(a){return a instanceof w||a instanceof R},u.applyOnAndroid=function(a,t){var e,o=a.android,i=!0,s=o.getBackground();if(s instanceof android.graphics.drawable.RippleDrawable){var r=s.getDrawable(0);r instanceof android.graphics.drawable.InsetDrawable?i=!1:u.isShadow(r)&&(s=r)}if(i){u.isShadow(s)&&(s=s instanceof w?s.getDrawable(1):null);var n=Array.create("float",8);t.cornerRadius===undefined?(n[0]=n[1]=E.Length.toDevicePixels(a.borderTopLeftRadius,0),n[2]=n[3]=E.Length.toDevicePixels(a.borderTopRightRadius,0),n[4]=n[5]=E.Length.toDevicePixels(a.borderBottomRightRadius,0),n[6]=n[7]=E.Length.toDevicePixels(a.borderBottomLeftRadius,0)):java.util.Arrays.fill(n,u.androidDipToPx(o,t.cornerRadius));var d=s&&s instanceof android.graphics.drawable.ColorDrawable&&s.getColor()?s.getColor():android.graphics.Color.parseColor(t.bgcolor||u.DEFAULT_BGCOLOR),h=void 0;if(t.shape!==c.RECTANGLE||t.bgcolor||!s)(e=new R).setShape(android.graphics.drawable.GradientDrawable[t.shape]),e.setCornerRadii(n),e.setColor(d),h=e;else{var l=new android.graphics.drawable.shapes.RoundRectShape(n,null,null);(e=new android.graphics.drawable.ShapeDrawable(l)).getPaint().setColor(d);var p=Array.create(android.graphics.drawable.Drawable,2);p[0]=e,p[1]=s,h=new w(p)}o.setBackgroundDrawable(h)}o.setElevation(u.androidDipToPx(o,t.elevation)),o.setTranslationZ(u.androidDipToPx(o,t.translationZ)),(o.getStateListAnimator()||t.forcePressAnimation)&&this.overrideDefaultAnimator(o,t)},u.overrideDefaultAnimator=function(a,t){var e=new android.animation.StateListAnimator,o=android.animation.ObjectAnimator,i=android.animation.AnimatorSet,s=android.R.integer.config_shortAnimTime,r=a.getContext().getResources().getInteger(s)/2,n=this.androidDipToPx(a,t.pressedElevation),d=this.androidDipToPx(a,t.pressedTranslationZ),h=this.androidDipToPx(a,t.elevation),l=this.androidDipToPx(a,t.translationZ||0),p=new i,u=new i,E=new i;p.playTogether(java.util.Arrays.asList([o.ofFloat(a,"translationZ",[d]).setDuration(r),o.ofFloat(a,"elevation",[n]).setDuration(0)])),u.playTogether(java.util.Arrays.asList([o.ofFloat(a,"translationZ",[l]).setDuration(r),o.ofFloat(a,"elevation",[h]).setDuration(0)])),E.playTogether(java.util.Arrays.asList([o.ofFloat(a,"translationZ",[0]).setDuration(0),o.ofFloat(a,"elevation",[0]).setDuration(0)])),e.addState([android.R.attr.state_pressed,android.R.attr.state_enabled],p),e.addState([android.R.attr.state_enabled],u),e.addState([],E),a.setStateListAnimator(e)},u.applyOnIOS=function(a,t){var e=a.ios,o=parseFloat((t.elevation-0).toFixed(2));e.layer.maskToBounds=!1,e.layer.shadowColor=new s.Color(t.shadowColor).ios.CGColor,e.layer.shadowOffset=t.shadowOffset?CGSizeMake(0,parseFloat(String(t.shadowOffset))):CGSizeMake(0,.54*o-.14),e.layer.shadowOpacity=t.shadowOpacity?parseFloat(String(t.shadowOpacity)):.006*o+.25,e.layer.shadowRadius=t.shadowRadius?parseFloat(String(t.shadowRadius)):.66*o-.5,e.layer.shouldRasterize=t.rasterize,e.layer.rasterizationScale=r.screen.mainScreen.scale;var i=null;t.useShadowPath&&(i=UIBezierPath.bezierPathWithRoundedRectCornerRadius(e.bounds,e.layer.shadowRadius).cgPath),e.layer.shadowPath=i},u.androidDipToPx=function(a,t){var e=a.getContext().getResources().getDisplayMetrics();return android.util.TypedValue.applyDimension(android.util.TypedValue.COMPLEX_UNIT_DIP,t,e)},u.DEFAULT_SHAPE=c.RECTANGLE,u.DEFAULT_BGCOLOR="#FFFFFF",u.DEFAULT_SHADOW_COLOR="#000000",u.DEFAULT_PRESSED_ELEVATION=2,u.DEFAULT_PRESSED_Z=4,u}(),o=function(){function a(a,t){var e=this;this.el=a,this.render=t,this.loaded=!1,this.initialized=!1,this.monkeyPatch=function(a){e.previousNSFn.call(e.el.nativeElement,a),e.applyShadow()},r.isAndroid&&(this.originalNSFn=this.el.nativeElement._redrawNativeBackground)}return a.prototype.ngOnInit=function(){this.initializeCommonData(),r.isAndroid?this.initializeAndroidData():r.isIOS&&this.initializeIOSData(),this.shadow&&this.shadow.elevation&&(r.isAndroid?this.loadFromAndroidData(this.shadow):r.isIOS&&this.loadFromIOSData(this.shadow)),this.applyShadow(),this.initialized=!0},a.prototype.onLoaded=function(){this.loaded=!0,this.initialized||this.ngOnInit(),this.applyShadow(),r.isAndroid&&(this.previousNSFn=this.el.nativeElement._redrawNativeBackground,this.el.nativeElement._redrawNativeBackground=this.monkeyPatch)},a.prototype.addIosWrapper=function(){if(r.isIOS){var a=this.el.nativeElement;this.iosShadowRapper=this.render.createElement("StackLayout");var t=a.parentNode;this.render.insertBefore(t,this.iosShadowRapper,a),this.render.removeChild(t,a),this.render.appendChild(this.iosShadowRapper,a)}},a.prototype.onUnloaded=function(){this.loaded=!1,r.isAndroid&&(this.el.nativeElement._redrawNativeBackground=this.originalNSFn)},a.prototype.ngAfterViewInit=function(){this.addIosWrapper()},a.prototype.ngOnChanges=function(a){this.loaded&&a&&(a.hasOwnProperty("shadow")||a.hasOwnProperty("elevation")||a.hasOwnProperty("pressedElevation")||a.hasOwnProperty("shape")||a.hasOwnProperty("bgcolor")||a.hasOwnProperty("cornerRadius")||a.hasOwnProperty("pressedTranslationZ")||a.hasOwnProperty("forcePressAnimation")||a.hasOwnProperty("translationZ")||a.hasOwnProperty("maskToBounds")||a.hasOwnProperty("shadowColor")||a.hasOwnProperty("shadowOffset")||a.hasOwnProperty("shadowOpacity")||a.hasOwnProperty("shadowRadius")||a.hasOwnProperty("rasterize")||a.hasOwnProperty("useShadowMap"))&&(a.hasOwnProperty("shadow")&&!a.hasOwnProperty("elevation")&&"number"==typeof a.shadow.currentValue&&(this.elevation=a.shadow.currentValue),a.shadow&&a.shadow.currentValue.elevation&&(r.isAndroid?this.loadFromAndroidData(this.shadow):r.isIOS&&this.loadFromIOSData(this.shadow)),this.applyShadow())},a.prototype.applyShadow=function(){if(null!==this.shadow&&this.shadow!==undefined&&(""!==this.shadow||this.elevation)&&!(r.isAndroid&&android.os.Build.VERSION.SDK_INT<21)){var a=r.isIOS?this.iosShadowRapper:this.el.nativeElement;a&&e.apply(a,{elevation:this.elevation,pressedElevation:this.pressedElevation,shape:this.shape,bgcolor:this.bgcolor,cornerRadius:this.cornerRadius,translationZ:this.translationZ,pressedTranslationZ:this.pressedTranslationZ,forcePressAnimation:this.forcePressAnimation,maskToBounds:this.maskToBounds,shadowColor:this.shadowColor,shadowOffset:this.shadowOffset,shadowOpacity:this.shadowOpacity,shadowRadius:this.shadowRadius,rasterize:this.rasterize,useShadowPath:this.useShadowPath})}},a.prototype.initializeCommonData=function(){var a=typeof this.shadow;"string"!==a&&"number"!==a||this.elevation||(this.elevation=this.shadow?parseInt(this.shadow,10):2);var t=typeof this.elevation;"string"!==t&&"number"!==t||(this.elevation=this.elevation?parseInt(this.elevation,10):2)},a.prototype.initializeAndroidData=function(){"string"==typeof this.cornerRadius&&(this.cornerRadius=parseInt(this.cornerRadius,10)),"string"==typeof this.translationZ&&(this.translationZ=parseInt(this.translationZ,10))},a.prototype.initializeIOSData=function(){"string"==typeof this.shadowOffset&&(this.shadowOffset=parseFloat(this.shadowOffset)),"string"==typeof this.shadowOpacity&&(this.shadowOpacity=parseFloat(this.shadowOpacity)),"string"==typeof this.shadowRadius&&(this.shadowRadius=parseFloat(this.shadowRadius))},a.prototype.loadFromAndroidData=function(a){this.elevation=a.elevation||this.elevation,this.shape=a.shape||this.shape,this.bgcolor=a.bgcolor||this.bgcolor,this.cornerRadius=a.cornerRadius||this.cornerRadius,this.translationZ=a.translationZ||this.translationZ},a.prototype.loadFromIOSData=function(a){this.maskToBounds=a.maskToBounds||this.maskToBounds,this.shadowColor=a.shadowColor||this.shadowColor,this.shadowOffset=a.shadowOffset||this.shadowOffset,this.shadowOpacity=a.shadowOpacity||this.shadowOpacity,this.shadowRadius=a.shadowRadius||this.shadowRadius,this.rasterize=a.rasterize||this.rasterize,this.useShadowPath=a.useShadowPath||this.useShadowPath},a.decorators=[{type:t.Directive,args:[{selector:"[shadow]"}]}],a.ctorParameters=function(){return[{type:t.ElementRef},{type:t.Renderer2}]},a.propDecorators={shadow:[{type:t.Input}],elevation:[{type:t.Input}],pressedElevation:[{type:t.Input}],shape:[{type:t.Input}],bgcolor:[{type:t.Input}],cornerRadius:[{type:t.Input}],translationZ:[{type:t.Input}],pressedTranslationZ:[{type:t.Input}],forcePressAnimation:[{type:t.Input}],maskToBounds:[{type:t.Input}],shadowColor:[{type:t.Input}],shadowOffset:[{type:t.Input}],shadowOpacity:[{type:t.Input}],shadowRadius:[{type:t.Input}],useShadowPath:[{type:t.Input}],rasterize:[{type:t.Input}],onLoaded:[{type:t.HostListener,args:["loaded"]}],onUnloaded:[{type:t.HostListener,args:["unloaded"]}]},a}(),i=function(){function a(){}return a.decorators=[{type:t.NgModule,args:[{imports:[],declarations:[o],exports:[o],providers:[]}]}],a}(),n=function(){},d={SWITCH:1,CARD_RESTING:2,RAISED_BUTTON_RESTING:2,SEARCH_BAR_RESTING:2,REFRESH_INDICADOR:3,SEARCH_BAR_SCROLLED:3,APPBAR:4,FAB_RESTING:6,SNACKBAR:6,BOTTOM_NAVIGATION_BAR:8,MENU:8,CARD_PICKED_UP:8,RAISED_BUTTON_PRESSED:8,SUBMENU_LEVEL1:9,SUBMENU_LEVEL2:10,SUBMENU_LEVEL3:11,SUBMENU_LEVEL4:12,SUBMENU_LEVEL5:13,FAB_PRESSED:12,NAV_DRAWER:16,RIGHT_DRAWER:16,MODAL_BOTTOM_SHEET:16,DIALOG:24,PICKER:24};d[d.SWITCH]="SWITCH",d[d.CARD_RESTING]="CARD_RESTING",d[d.RAISED_BUTTON_RESTING]="RAISED_BUTTON_RESTING",d[d.SEARCH_BAR_RESTING]="SEARCH_BAR_RESTING",d[d.REFRESH_INDICADOR]="REFRESH_INDICADOR",d[d.SEARCH_BAR_SCROLLED]="SEARCH_BAR_SCROLLED",d[d.APPBAR]="APPBAR",d[d.FAB_RESTING]="FAB_RESTING",d[d.SNACKBAR]="SNACKBAR",d[d.BOTTOM_NAVIGATION_BAR]="BOTTOM_NAVIGATION_BAR",d[d.MENU]="MENU",d[d.CARD_PICKED_UP]="CARD_PICKED_UP",d[d.RAISED_BUTTON_PRESSED]="RAISED_BUTTON_PRESSED",d[d.SUBMENU_LEVEL1]="SUBMENU_LEVEL1",d[d.SUBMENU_LEVEL2]="SUBMENU_LEVEL2",d[d.SUBMENU_LEVEL3]="SUBMENU_LEVEL3",d[d.SUBMENU_LEVEL4]="SUBMENU_LEVEL4",d[d.SUBMENU_LEVEL5]="SUBMENU_LEVEL5",d[d.FAB_PRESSED]="FAB_PRESSED",d[d.NAV_DRAWER]="NAV_DRAWER",d[d.RIGHT_DRAWER]="RIGHT_DRAWER",d[d.MODAL_BOTTOM_SHEET]="MODAL_BOTTOM_SHEET",d[d.DIALOG]="DIALOG",d[d.PICKER]="PICKER";var h=function(){};a.NgShadowModule=i,a.AndroidData=n,a.Elevation=d,a.IOSData=h,a.Shadow=e,a.ShapeEnum=c,a.ɵa=o,Object.defineProperty(a,"__esModule",{value:!0})});
//# sourceMappingURL=nativescript-ngx-shadow.umd.min.js.map